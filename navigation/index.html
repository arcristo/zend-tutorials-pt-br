<!doctype html>
<html lang="pt-br">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Tutoriais do Zend Framework">  
    <link rel="shortcut icon" href="../img/favicon.ico">

    <title>Adicionando zend-navigation ao Módulo Album - Tutoriais do Zend Framework</title>

    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css"
        integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w="
        crossorigin="anonymous" />
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
        integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0="
        crossorigin="anonymous" />
    <link rel="stylesheet" href="../css/styles-288837cc22.css">

    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-108409296-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-108409296-1');
    </script>
    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Alternar navegação</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <span class="navbar-brand">
                <a class="logo-link" href="https://framework.zend.com/" data-toggle="tooltip" data-placement="bottom" title="Ir para a página inicial do Zend Framework"><img src="../img/zf-logo-mark.svg" height="28" alt="Zend Framework" /></a>
                <a href="..">tutoriais</a>
            </span>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutoriais sobre MVC <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Começando com o Zend Framework</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../getting-started/overview/">Visão Geral</a>
</li>

        
            
<li >
    <a href="../getting-started/skeleton-application/">A Aplicação Esqueleto</a>
</li>

        
            
<li >
    <a href="../getting-started/modules/">Módulos</a>
</li>

        
            
<li >
    <a href="../getting-started/routing-and-controllers/">Roteamento e Controllers</a>
</li>

        
            
<li >
    <a href="../getting-started/database-and-models/">Banco de Dados e Models</a>
</li>

        
            
<li >
    <a href="../getting-started/forms-and-actions/">Formulários e Actions</a>
</li>

        
            
<li >
    <a href="../getting-started/conclusion/">Conclusão</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../unit-testing/">Realizando Testes Unitários em uma Aplicação zend-mvc</a>
</li>

                        
                            
<li class="active">
    <a href="./">Adicionando zend-navigation ao Módulo Album</a>
</li>

                        
                            
<li >
    <a href="../pagination/">Adicionando zend-paginator ao Módulo Album</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Tutorial Aprofundado</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../in-depth-guide/first-module/">Apresentando o Módulo Blog</a>
</li>

        
            
<li >
    <a href="../in-depth-guide/models-and-servicemanager/">Models e o ServiceManager</a>
</li>

        
            
<li >
    <a href="../in-depth-guide/preparing-databases/">Preparando-se para Bancos de Dados Diferentes</a>
</li>

        
            
<li >
    <a href="../in-depth-guide/zend-db-sql-zend-hydrator/">Abstração de SQL e Hidratação de Objetos</a>
</li>

        
            
<li >
    <a href="../in-depth-guide/understanding-routing/">Entendendo o Router</a>
</li>

        
            
<li >
    <a href="../in-depth-guide/zend-form-zend-form-fieldset/">Usando Forms e Fieldsets</a>
</li>

        
            
<li >
    <a href="../in-depth-guide/data-binding/">Editando e Deletando Dados</a>
</li>

        
            
<li >
    <a href="../in-depth-guide/review/">Revisando o Módulo Blog</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../advanced-config/">Configuração Avançada</a>
</li>

                        
                            
<li >
    <a href="../i18n/">Internacionalização</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutoriais de Componentes <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../db-adapter/">Configurando um Adapter de Bancos de Dados</a>
</li>

                        
                            
<li >
    <a href="../event-manager/">Usando o EventManager</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Migração <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Para a Versão 3</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../migration/to-v3/overview/">Visão Geral</a>
</li>

        
            
<li >
    <a href="../migration/to-v3/components/">Componentes</a>
</li>

        
            
<li >
    <a href="../migration/to-v3/application/">Aplicações</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" class="component-toggle" data-toggle="tooltip" data-placement="bottom" title="Exibir lista de componentes">
                        <i class="fa fa-book"></i> Componentes
                    </a>
                </li>

                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Pesquisar
                    </a>
                </li>
                
                    <li>
                        <a href="https://github.com/arcristo/zend-tutorials-pt-br/">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    
        <div id="page-top" class="container docs">
            
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#using-zend-navigation-in-your-album-module">Using zend-navigation in your Album Module</a></li>
        
            <li><a href="#preparation">Preparation</a></li>
        
            <li><a href="#setting-up-zend-navigation">Setting Up zend-navigation</a></li>
        
            <li><a href="#configuring-our-site-map">Configuring our Site Map</a></li>
        
            <li><a href="#adding-the-menu-view-helper">Adding the Menu View Helper</a></li>
        
            <li><a href="#adding-breadcrumbs">Adding Breadcrumbs</a></li>
        
    
    </ul>

    
    <ul class="pager hidden-print">
      <li class="previous">
        <a rel="prev" href="../unit-testing/"><i class="fa fa-arrow-left"></i> Anterior</a>
      </li>
      <li class="next">
        <a rel="next" href="../pagination/">Próxima <i class="fa fa-arrow-right"></i></a>
      </li>
    </ul>
    
</div></div>
            <div class="col-md-9" role="main">

<ol class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation">
  <li><a href="..">tutoriais</a></li>
  
    
      
        <li>Tutoriais sobre MVC</li>
      
    
  
  <li class="active">Adicionando zend-navigation ao Módulo Album</li>
</ol>

<h1 id="using-zend-navigation-in-your-album-module">Using zend-navigation in your Album Module</h1>
<p>In this tutorial we will use the <a href="https://zendframework.github.io/zend-navigation/intro/">zend-navigation component</a>
to add a navigation menu to the black bar at the top of the screen, and add
breadcrumbs above the main site content.</p>
<h2 id="preparation">Preparation</h2>
<p>In a real world application, the album browser would be only a portion of a
working website. Usually the user would land on a homepage first, and be able to
view albums by using a standard navigation menu. So that we have a site that is
more realistic than just the albums feature, lets make the standard skeleton
welcome page our homepage, with the <code>/album</code> route still showing our album module.
In order to make this change, we need to undo some work we did earlier.
Currently, navigating to the root of your app (<code>/</code>) routes you to the
<code>AlbumController</code>'s default action. Let's undo this route change so we have two
discrete entry points to the app, a home page, and an albums area.</p>
<pre class="codehilite"><code class="language-php">// In module/Application/config/module.config.php:
'home' =&gt; [
   'type' =&gt; Literal::class,
    'options' =&gt; [
        'route'    =&gt; '/',
        'defaults' =&gt; [
            'controller' =&gt; Controller\IndexController::class, // &lt;-- change back here
            'action'     =&gt; 'index',
        ],
    ],
],</code></pre>

<p>(You can also now remove the import for the <code>Album\Controller\AlbumController</code>
class.)</p>
<p>This change means that if you go to the home page of your application
(<code>http://localhost:8080/</code> or <code>http://zf-tutorial.localhost/</code>), you see the
default skeleton application introduction. Your list of albums is still
available at the <code>/album</code> route.</p>
<h2 id="setting-up-zend-navigation">Setting Up zend-navigation</h2>
<p>First, we need to install zend-navigation. From your root directory, execute the
following:</p>
<pre class="codehilite"><code class="language-bash">$ composer require zendframework/zend-navigation</code></pre>

<p>Assuming you followed the <a href="../getting-started/overview/">Getting Started tutorial</a>,
you will be prompted by the <a href="https://zendframework.github.io/zend-component-installer">zend-component-installer</a>
plugin to inject <code>Zend\Navigation</code>; be sure to select the option for either
<code>config/application.config.php</code> or <code>config/modules.config.php</code>; since it is the
only package you are installing, you can answer either "y" or "n" to the "Remember this
option for other packages of the same type" prompt.</p>
<blockquote>
<h3 id="manual-configuration">Manual configuration</h3>
<p>If you are not using zend-component-installer, you will need to setup
configuration manually. You can do this in one of two ways:</p>
<ul>
<li>Register the <code>Zend\Navigation</code> module in either
  <code>config/application.config.php</code> or <code>config/modules.config.php</code>. Make sure
  you put it towards the top of the module list, before any modules you have
  defined or third party modules you are using.</li>
<li>Alternately, add a new file, <code>config/autoload/navigation.global.php</code>, with
  the following contents:</li>
</ul>
<pre class="codehilite"><code class="language-php">&lt;?php
use Zend\Navigation\ConfigProvider;

return [
    'service_manager' =&gt; (new ConfigProvider())-&gt;getDependencyConfig(),
];</code></pre>

</blockquote>
<p>Once installed, our application is now aware of zend-navigation, and even has
some default factories in place, which we will now make use of.</p>
<h2 id="configuring-our-site-map">Configuring our Site Map</h2>
<p>Next up, we need zend-navigation to understand the hierarchy of our site.
To do this, we can add a <code>navigation</code> key to our configuration, with the site
structure details. We'll do that in the <code>Application</code> module configuration:</p>
<pre class="codehilite"><code class="language-php">// in module/Application/config/module.config.php:
return [
    /* ... */

    'navigation' =&gt; [
        'default' =&gt; [
            [
                'label' =&gt; 'Home',
                'route' =&gt; 'home',
            ],
            [
                'label' =&gt; 'Album',
                'route' =&gt; 'album',
                'pages' =&gt; [
                    [
                        'label'  =&gt; 'Add',
                        'route'  =&gt; 'album',
                        'action' =&gt; 'add',
                    ],
                    [
                        'label'  =&gt; 'Edit',
                        'route'  =&gt; 'album',
                        'action' =&gt; 'edit',
                    ],
                    [
                        'label'  =&gt; 'Delete',
                        'route'  =&gt; 'album',
                        'action' =&gt; 'delete',
                    ],
                ],
            ],
        ],
    ],

    /* ... */
];</code></pre>

<p>This configuration maps out the pages we've defined in our Album module, with
labels linking to the given route names and actions. You can define highly complex
hierarchical sites here with pages and sub-pages linking to route names,
controller/action pairs, or external uris. For more information, see the
<a href="https://zendframework.github.io/zend-navigation/quick-start/">zend-navigation quick start</a>.</p>
<h2 id="adding-the-menu-view-helper">Adding the Menu View Helper</h2>
<p>Now that we have the navigation helper configured by our service manager and
merged config, we can add the menu to the title bar to our layout by
using the <a href="https://zendframework.github.io/zend-navigation/helpers/menu/">menu view helper</a>:</p>
<pre class="codehilite"><code class="language-php">&lt;?php // in module/Application/view/layout/layout.phtml: ?&gt;
&lt;div class=&quot;collapse navbar-collapse&quot;&gt;
    &lt;?php // add this: ?&gt;
    &lt;?= $this-&gt;navigation('navigation')-&gt;menu() ?&gt;
&lt;/div&gt;</code></pre>

<p>The navigation helper is provided by default with zend-view, and uses the service
manager configuration we've already defined to configure itself automatically.
Refreshing your application, you will see a working menu; with just a few tweaks
however, we can make it look even better:</p>
<pre class="codehilite"><code class="language-php">&lt;?php // in module/Application/view/layout/layout.phtml: ?&gt;
&lt;div class=&quot;collapse navbar-collapse&quot;&gt;
    &lt;?php // update to: ?&gt;
    &lt;?= $this-&gt;navigation('navigation')
        -&gt;menu()
        -&gt;setMinDepth(0)
        -&gt;setMaxDepth(0)
        -&gt;setUlClass('nav navbar-nav') ?&gt;
&lt;/div&gt;</code></pre>

<p>Here we tell the renderer to give the root <code>&lt;ul&gt;</code> the class of <code>nav</code> (so that
Bootstrap styles the menu correctly), and only render the first level of any
given page. If you view your application in your browser, you will now see a
nicely styled menu appear in the title bar.</p>
<p>The great thing about zend-navigation is that it integrates with zend-router in
order to highlight the currently viewed page. Because of this, it sets the
active page to have a class of <code>active</code> in the menu; Bootstrap uses this to
highlight your current page accordingly.</p>
<h2 id="adding-breadcrumbs">Adding Breadcrumbs</h2>
<p>Adding breadcrumbs follows the same process. In our <code>layout.phtml</code> we want to
add breadcrumbs above the main content pane, so our users know exactly
where they are in our website. Inside the container <code>&lt;div&gt;</code>, before we
output the content from the view, let's add a breadcrumb by using the
<a href="https://zendframework.github.io/zend-navigation/helpers/breadcrumbs/">breadcrumbs view helper</a>.</p>
<pre class="codehilite"><code class="language-php">&lt;?php // module/Application/view/layout/layout.phtml: ?&gt;
&lt;div class=&quot;container&quot;&gt;
    &lt;?php // add the following line: ?&gt;
    &lt;?= $this-&gt;navigation('navigation')-&gt;breadcrumbs()-&gt;setMinDepth(0) ?&gt;
    &lt;?= $this-&gt;content ?&gt;
&lt;/div&gt;</code></pre>

<p>This adds a simple but functional breadcrumb to every page (we tell it to render
from a depth of 0 so we see all page levels), but we can do better than that!
Because Bootstrap has a styled breadcrumb as part of its base CSS, let's add
a partial that outputs the <code>&lt;ul&gt;</code> using Bootstrap styles. We'll create it in the
<code>view</code> directory of the <code>Application</code> module (this partial is application wide,
rather than album specific):</p>
<pre class="codehilite"><code class="language-php">&lt;?php // in module/Application/view/partial/breadcrumb.phtml: ?&gt;
&lt;ul class=&quot;breadcrumb&quot;&gt;
    &lt;?php
    // iterate through the pages
    foreach ($this-&gt;pages as $key =&gt; $page):
    ?&gt;
        &lt;li&gt;
            &lt;?php
            // if this isn't the last page, add a link and the separator:
            if ($key &lt; count($this-&gt;pages) - 1):
            ?&gt;
                &lt;a href=&quot;&lt;?= $page-&gt;getHref() ?&gt;&quot;&gt;&lt;?= $page-&gt;getLabel() ?&gt;&lt;/a&gt;
            &lt;?php
            // otherwise, output the name only:
            else:
            ?&gt;
                &lt;?= $page-&gt;getLabel() ?&gt;
            &lt;?php endif; ?&gt;
        &lt;/li&gt;
    &lt;?php endforeach; ?&gt;
&lt;/ul&gt;</code></pre>

<p>Notice how the partial is passed a <code>Zend\View\Model\ViewModel</code> instance with the
<code>pages</code> property set to an array of pages to render.</p>
<p>Now we need to tell the breadcrumb helper to use the partial we have just
written:</p>
<pre class="codehilite"><code class="language-php">&lt;?php // in module/Application/view/layout/layout.phtml: ?&gt;
&lt;div class=&quot;container&quot;&gt;
    &lt;?php // Update to: ?&gt;
    &lt;?= $this-&gt;navigation('navigation')
            -&gt;breadcrumbs()
            -&gt;setMinDepth(0)
            -&gt;setPartial('partial/breadcrumb') ?&gt;
    &lt;?= $this-&gt;content ?&gt;
&lt;/div&gt;</code></pre>

<p>Refreshing the page now gives us a styled set of breadcrumbs on each page.</p>

<hr />


<nav>
  <ul class="pager hidden-print">
    <li class="previous">
      <a rel="prev" href="../unit-testing/"><i class="fa fa-arrow-left"></i> Anterior</a>
    </li>
    <li class="next">
      <a rel="next" href="../pagination/">Próxima <i class="fa fa-arrow-right"></i></a>
    </li>
  </ul>
</nav>
</div>
            
        </div>
    

    <div id="footerwrap">
    <div class="container">
        <div class="row site-map">
            <div class="col-lg-3">
              <p>
                <strong>Zend Framework</strong><br />
                <a href="https://framework.zend.com/">framework.zend.com</a><br />
                <a href="https://docs.zendframework.com">docs.zendframework.com</a><br />
                <a href="https://packages.zendframework.com">packages.zendframework.com</a><br />
                <a href="https://apigility.org">apigility.org</a><br />
              </p>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12 centered">
                <a class="back-to-top" href="#page-top"><i class="fa fa-chevron-circle-up fa-4" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="spacing"></div>

        <div class="row">
            <div class="col-lg-8">
                <h4>Copyright</h4>
                <div class="hline-w"></div>

                <p>&copy; 2006-2017 by <a href="https://www.zend.com/">Zend</a>, a <a href="https://www.roguewave.com/">Rogue Wave Company</a>.</p>
            </div>

            <div class="col-lg-4">
                <h4>Contacts</h4>
                <div class="hline-w"></div>
                <p>
                    <a href="https://discourse.zendframework.com" class="btn-social btn-outline" alt="Forum" title="Forum"><i class="fa fa-comments"></i></a>
                    <a href="https://zendframework-slack.herokuapp.com" class="btn-social btn-outline" alt="Slack" title="Slack"><i class="fa fa-slack"></i></a>
                    <a href="https://github.com/zendframework" class="btn-social btn-outline" alt="Github" title="Github"><i class="fa fa-github"></i></a>
                    <a href="https://twitter.com/zfdevteam" class="btn-social btn-outline" alt="Twitter" title="Twitter"><i class="fa fa-twitter"></i></a>
                </p>
            </div>
        </div>
    </div>
</div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"
        integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8="
        crossorigin="anonymous"></script>

    <script>var base_url = '..';</script>
    <script src="../js/scripts-60a9690001.js"></script>
    <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
        <script src="../search/require.js"></script>
        <script src="../search/search.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Modal de Pesquisa" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Fechar</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Pesquisar</h4>
                </div>
                <div class="modal-body">
                    <p>
                        A partir daqui você pode pesquisar esses documentos. Digite seus termos de pesquisa abaixo.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Pesquisar..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    <div class="zf-components">
  <div class="zf-components-grid">
    <div class="zf-logo">
      <a href="https://framework.zend.com" data-toggle="tooltip" data-placement="bottom" title="Ir para a página inicial do Zend Framework"><img src="../img/zf-logo-mark.svg" alt="Zend Framework" width="250" /></a>
    </div>

    <div class="component-list"></div>

    <p class="zf-components-rollup"><a href="#">Ocultar lista</a></p>
  </div>
</div>

</body>

</html>
