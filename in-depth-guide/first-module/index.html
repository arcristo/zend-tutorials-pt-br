<!doctype html>
<html lang="pt-br">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Tutoriais do Zend Framework">  
    <link rel="shortcut icon" href="../../img/favicon.ico">

    <title>Apresentando o Módulo Blog - Tutoriais do Zend Framework</title>

    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css"
        integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w="
        crossorigin="anonymous" />
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
        integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0="
        crossorigin="anonymous" />
    <link rel="stylesheet" href="../../css/styles-288837cc22.css">

    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-108409296-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-108409296-1');
    </script>
    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Alternar navegação</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <span class="navbar-brand">
                <a class="logo-link" href="https://framework.zend.com/" data-toggle="tooltip" data-placement="bottom" title="Ir para a página inicial do Zend Framework"><img src="../../img/zf-logo-mark.svg" height="28" alt="Zend Framework" /></a>
                <a href="../..">tutoriais</a>
            </span>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutoriais sobre MVC <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Começando com o Zend Framework</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../getting-started/overview/">Visão Geral</a>
</li>

        
            
<li >
    <a href="../../getting-started/skeleton-application/">A Aplicação Esqueleto</a>
</li>

        
            
<li >
    <a href="../../getting-started/modules/">Módulos</a>
</li>

        
            
<li >
    <a href="../../getting-started/routing-and-controllers/">Roteamento e Controllers</a>
</li>

        
            
<li >
    <a href="../../getting-started/database-and-models/">Banco de Dados e Models</a>
</li>

        
            
<li >
    <a href="../../getting-started/forms-and-actions/">Formulários e Actions</a>
</li>

        
            
<li >
    <a href="../../getting-started/conclusion/">Conclusão</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../../unit-testing/">Realizando Testes Unitários em uma Aplicação zend-mvc</a>
</li>

                        
                            
<li >
    <a href="../../navigation/">Adicionando zend-navigation ao Módulo Album</a>
</li>

                        
                            
<li >
    <a href="../../pagination/">Adicionando zend-paginator ao Módulo Album</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Tutorial Aprofundado</a>
    <ul class="dropdown-menu">
        
            
<li class="active">
    <a href="./">Apresentando o Módulo Blog</a>
</li>

        
            
<li >
    <a href="../models-and-servicemanager/">Models e o ServiceManager</a>
</li>

        
            
<li >
    <a href="../preparing-databases/">Preparando-se para Bancos de Dados Diferentes</a>
</li>

        
            
<li >
    <a href="../zend-db-sql-zend-hydrator/">Abstração de SQL e Hidratação de Objetos</a>
</li>

        
            
<li >
    <a href="../understanding-routing/">Entendendo o Router</a>
</li>

        
            
<li >
    <a href="../zend-form-zend-form-fieldset/">Usando Forms e Fieldsets</a>
</li>

        
            
<li >
    <a href="../data-binding/">Editando e Deletando Dados</a>
</li>

        
            
<li >
    <a href="../review/">Revisando o Módulo Blog</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../../advanced-config/">Configuração Avançada</a>
</li>

                        
                            
<li >
    <a href="../../i18n/">Internacionalização</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutoriais de Componentes <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../db-adapter/">Configurando um Adapter de Bancos de Dados</a>
</li>

                        
                            
<li >
    <a href="../../event-manager/">Usando o EventManager</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Migração <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Para a Versão 3</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../migration/to-v3/overview/">Visão Geral</a>
</li>

        
            
<li >
    <a href="../../migration/to-v3/components/">Componentes</a>
</li>

        
            
<li >
    <a href="../../migration/to-v3/application/">Aplicações</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" class="component-toggle" data-toggle="tooltip" data-placement="bottom" title="Exibir lista de componentes">
                        <i class="fa fa-book"></i> Componentes
                    </a>
                </li>

                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Pesquisar
                    </a>
                </li>
                
                    <li>
                        <a href="https://github.com/arcristo/zend-tutorials-pt-br/">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    
        <div id="page-top" class="container docs">
            
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#introducing-the-blog-module">Introducing the Blog Module</a></li>
        
            <li><a href="#writing-a-new-module">Writing a new Module</a></li>
        
            <li><a href="#configuring-the-module">Configuring the Module</a></li>
        
    
    </ul>

    
    <ul class="pager hidden-print">
      <li class="previous">
        <a rel="prev" href="../../pagination/"><i class="fa fa-arrow-left"></i> Anterior</a>
      </li>
      <li class="next">
        <a rel="next" href="../models-and-servicemanager/">Próxima <i class="fa fa-arrow-right"></i></a>
      </li>
    </ul>
    
</div></div>
            <div class="col-md-9" role="main">

<ol class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation">
  <li><a href="../..">tutoriais</a></li>
  
    
      
        <li>Tutoriais sobre MVC</li>
      
    
      
        <li>Tutorial Aprofundado</li>
      
    
  
  <li class="active">Apresentando o Módulo Blog</li>
</ol>

<h1 id="introducing-the-blog-module">Introducing the Blog Module</h1>
<p>Now that we know about the basics of the zend-mvc skeleton application,
let's continue and create our very own module. We will create a module named
"Blog". This module will display a list of database entries that represent a
single blog post. Each post will have three properties: <code>id</code>, <code>text</code>, and
<code>title</code>. We will create forms to enter new posts into our database and to edit
existing posts. Furthermore we will do so by using best-practices throughout the
whole tutorial.</p>
<h2 id="writing-a-new-module">Writing a new Module</h2>
<p>Let's start by creating a new folder under the <code>/module</code> directory called
<code>Blog</code>, with the following stucture:</p>
<pre class="codehilite"><code class="language-text">module/
    Blog/
        config/
        src/
        view/</code></pre>

<p>To be recognized as a module by the <a href="https://zendframework.github.io/zend-modulemanager/intro/">ModuleManager</a>,
we need to do three things:</p>
<ul>
<li>Tell Composer how to autoload classes from our new module.</li>
<li>Create a <code>Module</code> class in the <code>Blog</code> namespace.</li>
<li>Notify the application of the new module.</li>
</ul>
<p>Let's tell Composer about our new module. Open the <code>composer.json</code> file in the
project root, and edit the <code>autoload</code> section to add a new PSR-4 entry for the
<code>Blog</code> module; when you're done, it should read:</p>
<pre class="codehilite"><code class="language-json">&quot;autoload&quot;: {
   &quot;psr-4&quot;: {
        &quot;Application\\&quot;: &quot;module/Application/src/&quot;,
        &quot;Album\\&quot;: &quot;module/Album/src/&quot;,
        &quot;Blog\\&quot;: &quot;module/Blog/src/&quot;
   }
}</code></pre>

<p>Once you're done, tell Composer to update its autoloading definitions:</p>
<pre class="codehilite"><code class="language-bash">$ composer dump-autoload</code></pre>

<p>Next, we will create a <code>Module</code> class under the <code>Blog</code> namespace. Create the
file <code>module/Blog/src/Module.php</code> with the following contents:</p>
<pre class="codehilite"><code class="language-php">&lt;?php
namespace Blog;

class Module
{
}</code></pre>

<p>We now have a module that can be detected by the
<a href="https://zendframework.github.io/zend-modulemanager/intro/">ModuleManager</a>.
Let's add this module to our application. Although our module doesn't do
anything yet, just having the <code>Module.php</code> class allows it to be loaded by the
ModuleManager.  To do this, add an entry for <code>Blog</code> to the modules array inside
<code>config/modules.config.php</code>:</p>
<pre class="codehilite"><code class="language-php">&lt;?php
// In config/modules.config.php:

return [
    /* ... */
    'Application',
    'Album',
    'Blog',
];</code></pre>

<p>If you refresh your application you should see no change at all (but also no
errors).</p>
<p>At this point it's worth taking a step back to discuss what modules are for. In
short, a module is an encapsulated set of features for your application. A
module might add features to the application that you can see, like our <code>Blog</code>
module; or it might provide background functionality for other modules in the
application to use, such as interacting with a third party API.</p>
<p>Organizing your code into modules makes it easier for you to reuse functionality
in other application, or to use modules written by the community.</p>
<h2 id="configuring-the-module">Configuring the Module</h2>
<p>The next thing we're going to do is add a route to our application so that our
module can be accessed through the URL <code>localhost:8080/blog</code>. We do this by
adding router configuration to our module, but first we need to let the
<code>ModuleManager</code> know that our module has configuration that it needs to load.</p>
<p>This is done by adding a <code>getConfig()</code> method to the <code>Module</code> class that
returns the configuration. (This method is defined in the
<code>ConfigProviderInterface</code>, although explicitly implementing this interface in the
module class is optional.) This method should return either an <code>array</code> or a
<code>Traversable</code> object. Continue by editing <code>module/Blog/src/Module.php</code>:</p>
<pre class="codehilite"><code class="language-php">// In /module/Blog/Module.php:
class Module
{
    public function getConfig()
    {
        return [];
    }
}</code></pre>

<p>With this, our module is now able to be configured. Configuration files can
become quite big, though, and keeping everything inside the <code>getConfig()</code> method
won't be optimal. To help keep our project organized, we're going to put our
array configuration in a separate file. Go ahead and create this file at
<code>module/Blog/config/module.config.php</code>:</p>
<pre class="codehilite"><code class="language-php">&lt;?php
return [];</code></pre>

<p>Now rewrite the <code>getConfig()</code> function to include this newly created
file instead of directly returning the array:</p>
<pre class="codehilite"><code class="language-php">&lt;?php
// In /module/Blog/Module.php:

public function getConfig()
{
    return include __DIR__ . '/../config/module.config.php';
}</code></pre>

<p>Reload your application and you'll see that everything remains as it was. Next
we add the new route to our configuration file:</p>
<pre class="codehilite"><code class="language-php">// In /module/Blog/config/module.config.php:
namespace Blog;

use Zend\Router\Http\Literal;

return [
    // This lines opens the configuration for the RouteManager
    'router' =&gt; [
        // Open configuration for all possible routes
        'routes' =&gt; [
            // Define a new route called &quot;blog&quot;
            'blog' =&gt; [
                // Define a &quot;literal&quot; route type:
                'type' =&gt; Literal::class,
                // Configure the route itself
                'options' =&gt; [
                    // Listen to &quot;/blog&quot; as uri:
                    'route' =&gt; '/blog',
                    // Define default controller and action to be called when
                    // this route is matched
                    'defaults' =&gt; [
                        'controller' =&gt; Controller\ListController::class,
                        'action'     =&gt; 'index',
                    ],
                ],
            ],
        ],
    ],
];</code></pre>

<p>We've now created a route called <code>post</code> that listens to the URL
<code>localhost:8080/blog</code>. Whenever someone accesses this route, the <code>indexAction()</code>
function of the class <code>Blog\Controller\ListController</code> will be executed.
However, this controller does not exist yet, so if you reload the page you will
see this error message:</p>
<pre class="codehilite"><code class="language-text">A 404 error occurred
Page not found.
The requested controller could not be mapped by routing.

Controller:
Blog\Controller\ListController(resolves to invalid controller class or alias: Blog\Controller\ListController)</code></pre>

<p>We now need to tell our module where to find this controller named
<code>Blog\Controller\ListController</code>. To achieve this we have to add this key to the
<code>controllers</code> configuration key inside your
<code>module/Blog/config/module.config.php</code>.</p>
<pre class="codehilite"><code class="language-php">namespace Blog;

use Zend\ServiceManager\Factory\InvokableFactory;

return [
    'controllers' =&gt; [
        'factories' =&gt; [
            Controller\ListController::class =&gt; InvokableFactory::class,
        ],
    ],
    /* ... */
];</code></pre>

<p>This configuration defines a factory for the controller class
<code>Blog\Controller\ListController</code>, using the zend-servicemanager
<code>InvokableFactory</code> (which, internally, instantiates the class with no
arguments).  Reloading the page should then give you:</p>
<pre class="codehilite"><code class="language-text">Fatal error: Class 'Blog\Controller\ListController' not found in {projectPath}/vendor/zendframework/zend-servicemanager/src/Factory/InvokableFactory.php on line 32</code></pre>

<p>This error tells us that the application knows what class to load, but was not
able to autoload it. In our case, we've already setup autoloading, but have not
yet defined the controller class!</p>
<p>Create the file <code>module/Blog/src/Controller/ListController.php</code> with the
following contents:</p>
<pre class="codehilite"><code class="language-php">&lt;?php
namespace Blog\Controller;

class ListController
{
}</code></pre>

<p>Reloading the page now will finally result into a new screen. The new error message looks like this:</p>
<pre class="codehilite"><code class="language-html">A 404 error occurred
Page not found.
The requested controller was not dispatchable.

Controller:
Blog\Controller\List(resolves to invalid controller class or alias: Blog\Controller\List)

Additional information:
Zend\ServiceManager\Exception\InvalidServiceException

File:
{projectPath}/vendor/zendframework/zend-mvc/src/Controller/ControllerManager.php:{lineNumber}

Message:
Plugin of type &quot;Blog\Controller\ListController&quot; is invalid; must implement Zend\Stdlib\DispatchableInterface</code></pre>

<p>This happens because our controller must implement
<a href="https://github.com/zendframework/zend-stdlib/blob/0e66240daec93f19ae104084e369c393453fc901/src/DispatchableInterface.php">DispatchableInterface</a>
in order to be 'dispatched' (or run) by zend-mvc. zend-mvc provides a base
controller implementation of it with
<a href="https://github.com/zendframework/zend-mvc/blob/9fc7f2cf569760d6a0cdc62f56e042a0aee3a4c9/src/Controller/AbstractActionController.php">AbstractActionController</a>,
which we are going to use. Let's modify our controller now:</p>
<pre class="codehilite"><code class="language-php">// In /module/Blog/src/Blog/Controller/ListController.php:

namespace Blog\Controller;

use Zend\Mvc\Controller\AbstractActionController;

class ListController extends AbstractActionController
{
}</code></pre>

<p>It's now time for another refresh of the site. You should now see a new error message:</p>
<pre class="codehilite"><code class="language-text">An error occurred

An error occurred during execution; please try again later.

Additional information:

Zend\View\Exception\RuntimeException

File:
{projectPath}/vendor/zendframework/zend-view/src/Renderer/PhpRenderer.php:{lineNumber}

Message:
Zend\View\Renderer\PhpRenderer::render: Unable to render template &quot;blog/list/index&quot;; resolver could not resolve to a file</code></pre>

<p>Now the application tells you that a view template-file can not be rendered,
which is to be expected as we've not created it yet. The application is
expecting it to be at <code>module/Blog/view/blog/list/index.phtml</code>. Create this
file and add some dummy content to it:</p>
<pre class="codehilite"><code class="language-html">&lt;!-- Filename: module/Blog/view/blog/list/index.phtml --&gt;
&lt;h1&gt;Blog\ListController::indexAction()&lt;/h1&gt;</code></pre>

<p>Before we continue let us quickly take a look at where we placed this file. Note
that view files are found within the <code>/view</code> subdirectory, not <code>/src</code> as they
are not PHP class files, but template files for rendering HTML. The path,
however, deserves some explanation. First we have the lowercased namespace,
followed by the lowercased controller name (without the suffix 'controller'),
and lastly comes the name of the action that we are accessing (again without the
suffix 'action'). As a templated string, you can think of it as:
<code>view/{namespace}/{controller}/{action}.phtml</code>. This has become a community
standard but you have the freedom to specify custom paths if desired.</p>
<p>However creating this file alone is not enough and this brings as to the final
topic of this part of the tutorial. We need to let the application know where
to look for view files. We do this within our module's configuration file,
<code>module.config.php</code>.</p>
<pre class="codehilite"><code class="language-php">// In module/Blog/config/module.config.php:

return [
    'controllers' =&gt; [ /** Controller Configuration */ ],
    'router'      =&gt; [ /** Route Configuration */ ]
    'view_manager' =&gt; [
        'template_path_stack' =&gt; [
            __DIR__ . '/../view',
        ],
    ],
];</code></pre>

<p>The above configuration tells the application that the folder
<code>module/Blog/view/</code> has view files in it that match the above described default
scheme. It is important to note that with this you can not only ship view files
for your module, but you can also overwrite view files from other modules.</p>
<p>Reload your site now. Finally we are at a point where we see something different
than an error being displayed! Congratulations, not only have you created a
simple "Hello World" style module, you also learned about many error messages
and their causes. If we didn't exhaust you too much, continue with our
tutorial, and let's create a module that actually does something.</p>

<hr />


<nav>
  <ul class="pager hidden-print">
    <li class="previous">
      <a rel="prev" href="../../pagination/"><i class="fa fa-arrow-left"></i> Anterior</a>
    </li>
    <li class="next">
      <a rel="next" href="../models-and-servicemanager/">Próxima <i class="fa fa-arrow-right"></i></a>
    </li>
  </ul>
</nav>
</div>
            
        </div>
    

    <div id="footerwrap">
    <div class="container">
        <div class="row site-map">
            <div class="col-lg-3">
              <p>
                <strong>Zend Framework</strong><br />
                <a href="https://framework.zend.com/">framework.zend.com</a><br />
                <a href="https://docs.zendframework.com">docs.zendframework.com</a><br />
                <a href="https://packages.zendframework.com">packages.zendframework.com</a><br />
                <a href="https://apigility.org">apigility.org</a><br />
              </p>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12 centered">
                <a class="back-to-top" href="#page-top"><i class="fa fa-chevron-circle-up fa-4" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="spacing"></div>

        <div class="row">
            <div class="col-lg-8">
                <h4>Copyright</h4>
                <div class="hline-w"></div>

                <p>&copy; 2006-2017 by <a href="https://www.zend.com/">Zend</a>, a <a href="https://www.roguewave.com/">Rogue Wave Company</a>.</p>
            </div>

            <div class="col-lg-4">
                <h4>Contacts</h4>
                <div class="hline-w"></div>
                <p>
                    <a href="https://discourse.zendframework.com" class="btn-social btn-outline" alt="Forum" title="Forum"><i class="fa fa-comments"></i></a>
                    <a href="https://zendframework-slack.herokuapp.com" class="btn-social btn-outline" alt="Slack" title="Slack"><i class="fa fa-slack"></i></a>
                    <a href="https://github.com/zendframework" class="btn-social btn-outline" alt="Github" title="Github"><i class="fa fa-github"></i></a>
                    <a href="https://twitter.com/zfdevteam" class="btn-social btn-outline" alt="Twitter" title="Twitter"><i class="fa fa-twitter"></i></a>
                </p>
            </div>
        </div>
    </div>
</div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"
        integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8="
        crossorigin="anonymous"></script>

    <script>var base_url = '../..';</script>
    <script src="../../js/scripts-60a9690001.js"></script>
    <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../search/require.js"></script>
        <script src="../../search/search.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Modal de Pesquisa" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Fechar</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Pesquisar</h4>
                </div>
                <div class="modal-body">
                    <p>
                        A partir daqui você pode pesquisar esses documentos. Digite seus termos de pesquisa abaixo.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Pesquisar..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    <div class="zf-components">
  <div class="zf-components-grid">
    <div class="zf-logo">
      <a href="https://framework.zend.com" data-toggle="tooltip" data-placement="bottom" title="Ir para a página inicial do Zend Framework"><img src="../../img/zf-logo-mark.svg" alt="Zend Framework" width="250" /></a>
    </div>

    <div class="component-list"></div>

    <p class="zf-components-rollup"><a href="#">Ocultar lista</a></p>
  </div>
</div>

</body>

</html>
